<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cadastro de Usuarios</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
    <style>
      .home-button {
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="panel panel-default">
        <div class="col text-star">
          <a
            id="hom"
            href="home.html"
            class="btn btn-primary space-top home-button"
          >
            <img src="img/house.svg" alt="home" width="24" height="24" />
          </a>
        </div>
        <br /><br />
        <div class="panel-heading">
          <div class="logo-container"></div>
          LOGIN
        </div>

        <form
          id="pst"
          action="CadastroUsuario.php"
          method="POST"
          onsubmit="return validarFormulario()"
        >
          <input
            type="text"
            name="nome"
            placeholder="Digite o nome"
            class="form-control"
          /><br />
          <input
            type="text"
            name="email"
            placeholder="Digite o seu Email"
            class="form-control"
          /><br />
          <input
            type="password"
            name="senha"
            placeholder="Digite a senha"
            class="form-control"
          /><br />
          <input
            type="text"
            name="cpf"
            placeholder="Digite o CPF"
            class="form-control cpf-mask"
          /><br />

          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              id="vendedor"
              name="perfil"
              value="vendedor"
              checked
            />
            <label class="form-check-label" for="vendedor"> Vendedor </label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              id="estoquista"
              name="perfil"
              value="estoquista"
            />
            <label class="form-check-label" for="estoquista">
              Estoquista
            </label>
          </div>

          <div class="text-end">
            <button type="submit" class="btn btn-success">Cadastrar</button>
          </div>
        </form>
      </div>
    </div>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script>
      function getUrlParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
      }

      const conectionId = getUrlParam("conection");
      const profileId = getUrlParam("prfl");

      const formLogin = document.querySelector("#pst");
      const linkhome = document.querySelector("#hom");

      if (conectionId) {
        formLogin.action += `?conection=${conectionId}&prfl=${profileId}`;
        linkhome.href += `?conection=${conectionId}&prfl=${profileId}`;
      }

      $(".cpf-mask").mask("000.000.000-00");

      function validarFormulario() {
        var email = document.querySelector('input[name="email"]').value;
        var regex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;
        if (!regex.test(email)) {
          alert("Email inv√°lido!");
          return false;
        }
        return true;
      }
    </script>
  </body>
</html>
